<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Paul A. Bloom" />


<title>Into the (Bayesian) Multiverse!</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Amygdala Multiverse</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Info</a>
</li>
<li>
  <a href="into_the_bayesian_multiverse.html">Amygdala Multiverse Demo</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Into the (Bayesian) Multiverse!</h1>
<h4 class="author">Paul A. Bloom</h4>

</div>


<p>Welcome! This document serves 2 purposes:</p>
<ol style="list-style-type: decimal">
<li>Provide a walkthough for anyone potentially interested in conducting multiverse analyses (or specification curves), especially when considering Bayesian models or fMRI data</li>
<li>Serve as documentation for analysis code for <a href="https://osf.io/">Bloom et al. 2021</a> with code that can be run using <em>simulated data</em> (i.e. fake data), since we cannot share the data publicly.</li>
</ol>
<div id="load-packages" class="section level1">
<h1>Load Packages</h1>
<pre class="r"><code>library(tidyverse)
library(specr)
library(brms)</code></pre>
</div>
<div id="simulated-data-here-only" class="section level1">
<h1>Simulated data here only!</h1>
<p><strong>Note:</strong> these data are fake! Under our Institutional Review Board protocol and for the purpose of creating participant identies private, we cannot share our actual data publicly. However, we’ve <em>simulated</em> an amygdala reactivity dataset for the purposes of creating a multiverse analysis where the code can actually be run!</p>
<ul>
<li>Briefly, to create simulated data that <em>decently</em> approximates the real data without risk of identifying participants, we created a multivariate regression model using <a href="https://github.com/paul-buerkner/brms">brms</a>, then drew samples from the model’s posterior predictive distribution for fear &gt; baseline amygdala reactivity estimates for each study timepoint for each real participant.</li>
<li>We also scrambled the order of participant IDs and added noise to ages.</li>
<li>So, the data here should do a <em>reasonable</em> job of mimicking the <em>structure</em> of some of the data analyzed in <a href="https://osf.io/">Bloom et al</a> without compromising participant data privacy and security. Some of the relationships among variables may differ somewhat from the real data, however. For more on data synthesis for these purposes, check out the <a href="https://cran.r-project.org/web/packages/synthpop/vignettes/synthpop.pdf">synthpop</a> R package.</li>
</ul>
</div>
<div id="read-in-the-data" class="section level1">
<h1>Read in the data</h1>
<p>Here’s what is in each column:</p>
<ul>
<li><code>id</code> - participant ID, identifies a participant across timepoints</li>
<li><code>wave</code> - the study timepoint (either <code>1</code>, <code>2</code>, or <code>3</code>)</li>
<li><code>age</code> - participant age at the given timepoint, in years</li>
<li><code>block</code> - the temporal position of the task run relative to other tasks in the scanner (<code>1</code> = first, <code>2</code> = second, <code>3</code> = third)</li>
<li><code>motion</code> - head motion (mean framewise displacement), which has been z-scored here</li>
<li><code>scanner</code> - whether the data were collected on a first MRI scanner (<code>1</code>= timepoints 1 &amp; 2) or a second (<code>2</code> = timepoint 3). Both were Siemens Tim Trio</li>
<li><code>prev_studied</code>- whether this scan was previously analyzed in similar work by <a href="https://www.jneurosci.org/content/33/10/4584">Gee et al (2013)</a>. <code>1</code> indicates a scan was previously studied</li>
</ul>
<p>All of the rest of the columns are measurements of amygdala reactivity to fear faces &gt; baseline for each scan, labeled such that:</p>
<ul>
<li>columns with the <code>ho</code> prefix are from amygdala ROIs defined by the Harvard-Oxford subcortical atlas, <code>native</code> prefix columns are in native space defined through Freesurfer</li>
<li>columns with the <code>right</code> prefix are the right amygdala, and <code>left</code> are the left</li>
<li>columns with the <code>beta</code> prefix denote raw beta estimates of amygdala reactivity magnitude, while the <code>tstat</code> prefix denote t-statistic measurements of amygdala reactivity scaled by estimation uncertainty (the standard error)</li>
</ul>
<pre class="r"><code>fake_data = read_csv(&#39;simulated_amygdala_reactivity.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_double(),
##   wave = col_double(),
##   age = col_double(),
##   block = col_double(),
##   motion = col_double(),
##   scanner = col_double(),
##   prev_studied = col_double(),
##   ho_right_amyg_beta = col_double(),
##   ho_left_amyg_beta = col_double(),
##   ho_right_amyg_tstat = col_double(),
##   ho_left_amyg_tstat = col_double(),
##   native_right_amyg_beta = col_double(),
##   native_left_amyg_beta = col_double(),
##   native_right_amyg_tstat = col_double(),
##   native_left_amyg_tstat = col_double()
## )</code></pre>
<pre class="r"><code>head(fake_data[,1:8])</code></pre>
<pre><code>## # A tibble: 6 x 8
##      id  wave   age block motion scanner prev_studied ho_right_amyg_beta
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl&gt;              &lt;dbl&gt;
## 1     1     3 16.1      1  0.293       2           NA            0.785  
## 2     2     1 15.2      3  0.08        1            1            0.375  
## 3     2     2 17.3      1 -1.32        1           NA           -0.168  
## 4     2     3 19.4      1  0.063       2           NA           -0.230  
## 5     3     1 22.7      2 -0.986       1           NA            0.00908
## 6     7     1  5.83     1  1.18        1           NA           -0.817</code></pre>
</div>
<div id="specification-curve-specr-version" class="section level1">
<h1>Specification curve: <code>specr</code> version</h1>
<p><a href="https://cran.r-project.org/web/packages/specr/vignettes/specr.html">specr</a> is a great package with a lot of nice functionality for running specification curve analyses. This wasn’t the software we used for the main analyses (because it hadn’t yet been released yet), but it’s probably the most straightforward way to go for regression-based specification curve analyses.</p>
<p>First, a little data wrangling before modeling.</p>
<ul>
<li>We’ll create a variable called <code>grp</code> to index whether scans were previously studied for age-related changes in amygdala reactivity in <a href="https://www.jneurosci.org/content/33/10/4584">Gee et al., 2013</a>. The <code>not_studied</code> group here can be considered a more independent sample from the previous study.</li>
<li>We’ll also create a vector of the outcomes (different measures of amygdala reactivity)</li>
</ul>
<pre class="r"><code>fake_data = mutate(fake_data, grp = ifelse(is.na(prev_studied), &#39;not_studied&#39;, &#39;prev_studied&#39;))
outcomes = names(fake_data)[grepl(&#39;amyg&#39;, names(fake_data))]</code></pre>
<div id="specify-the-custom-model" class="section level2">
<h2>Specify the custom model</h2>
<p><code>Specr</code> has a nice feature of allowing a custom model function. For more detailed info on this, see <a href="https://masurp.github.io/specr/articles/random_effects.html">here</a>.</p>
<p>Here, we set up a multilevel model using the <code>lme4</code> package’s <code>lmer()</code> function to take advangate of varying intercepts for each participant (as denoted by the <code>(1|id)</code> syntax in the model formula). We also include a covariate for <code>motion</code>, because we want all models to include this covariate for head motion during the scan. We also need to load the <code>lme4</code> and <code>broom.mixed</code> packages inside the custom model function so that <code>specr</code> can use them to run the model and parse the results.</p>
<pre class="r"><code>lmer_model_with_motion &lt;- function(formula, data,...) {
  require(lme4)
  require(broom.mixed)
  # set up the model base formula (basically specr will past all other model info in here)
  formula &lt;- paste(formula, &quot;+ motion + (1|id)&quot;)
  lmer(formula, data)
}

brms_model_with_motion &lt;- function(formula, data,...) {
  require(brms)
  require(broom.mixed)
  # set up the model base formula (basically specr will past all other model info in here)
  formula &lt;- paste(formula, &quot;+ motion + (1|id)&quot;)
  brm(formula, data, cores = 4)
}</code></pre>
</div>
<div id="run-all-model-specifications-with-run_specs" class="section level2">
<h2>Run all model specifications with <code>run_specs()</code></h2>
<p>How does this <a href="https://masurp.github.io/specr/reference/run_specs.html"><code>run_specs()</code></a> function work?</p>
<ul>
<li><code>df=fake_data</code>: specifies the data frame to fit the model to</li>
<li><code>x = 'age'</code>: the ‘x’ variable, or predictor of interest in the model. You can have multiple x variables if you want by specificying a vector with multiple values here</li>
<li><code>y = outcomes</code>: here we specify a vector of multiple outcome variables, the 8 different measures of amygdala reactivity</li>
<li><code>controls = c('block', 'scanner')</code>: covariates to include in the model.</li>
<li><code>model = 'lmer_model_with_motion'</code>: specifies the custom model. If you don’t need a custom model, there are also defaults, like <code>&quot;lm&quot;</code> to run OLS regression</li>
<li><code>subsets = list(grp = 'not_studied')</code>: subsets of the data to run the model on, expressed as a list. Here, we want to run the model specifically on the <code>not_studied</code> group, in addition to the full dataset.</li>
<li>Because we have <code>all.comb=TRUE</code>, this will run specifications with all possible combinations of covariates. Otherwise, it will run models with no covariates, each single covariate, and then all together. Note: random slopes are not included for these covariates by default unless we add this to the custom model</li>
</ul>
<p>Here, 8 outcomes X 4 possible covariate specifications X 2 subsets = 64 total specifications in our multiverse</p>
<pre class="r"><code>specs = specr::run_specs(df = fake_data,
                         x = &#39;age&#39;, y = outcomes, 
                         controls = c(&#39;block&#39;, &#39;scanner&#39;),
                         model = &#39;lmer_model_with_motion&#39;,
                         subsets = list(grp = &#39;not_studied&#39;), 
                         all.comb = TRUE)</code></pre>
</div>
<div id="check-out-results-summaries-across-all-models" class="section level2">
<h2>Check out results summaries across all models</h2>
<p>The output of <code>run_specs()</code> is a data frame with each row representing one specification from the multiverse analysis we have just run. The <code>x</code>, <code>y</code>, <code>model</code>, <code>controls</code> and <code>subsets</code> columns give us information on the setup of each model, then we get a variety of statistical outputs from the fit models. Because we have 64 specifications here, the dataframe is 64 rows.</p>
<ul>
<li><code>estimate</code>: the beta estimate in the regression model for the given <code>x</code> term of interest (or the ‘slope’ for a continuous predictor). Here, these beta estimates represent estimates for age-related change in amygdala reactivity, such that negative estimates indicate age-related decreases in amygdala reactivity.</li>
<li><code>std.error</code>: The standard error about the beta estimate</li>
<li><code>statistic</code>: The t-statistic for the beta estimate</li>
<li><code>conf.low</code>: The lower bound of the 95% confidence interval for the beta estimate</li>
<li><code>conf.high</code>: The upper bound of the 95% confidence interval for the beta estimate</li>
<li>all of the <code>fit_</code> columns provide information on the goodness-of-fit of the model more generally (i.e. log likelihood, AIC, BIC), as well as the residual degrees of freedom.</li>
</ul>
<pre class="r"><code>specs</code></pre>
<pre><code>## # A tibble: 64 x 18
##    x     y     model controls effect group estimate std.error statistic conf.low
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 age   ho_r… lmer… block    fixed  &lt;NA&gt;   -0.0416    0.0145     -2.87  -0.0700
##  2 age   ho_l… lmer… block    fixed  &lt;NA&gt;   -0.0390    0.0146     -2.67  -0.0677
##  3 age   ho_r… lmer… block    fixed  &lt;NA&gt;   -0.0423    0.0142     -2.97  -0.0702
##  4 age   ho_l… lmer… block    fixed  &lt;NA&gt;   -0.0298    0.0135     -2.21  -0.0562
##  5 age   nati… lmer… block    fixed  &lt;NA&gt;   -0.0313    0.0159     -1.97  -0.0624
##  6 age   nati… lmer… block    fixed  &lt;NA&gt;   -0.0303    0.0156     -1.94  -0.0609
##  7 age   nati… lmer… block    fixed  &lt;NA&gt;   -0.0318    0.0157     -2.03  -0.0624
##  8 age   nati… lmer… block    fixed  &lt;NA&gt;   -0.0269    0.0142     -1.89  -0.0548
##  9 age   ho_r… lmer… scanner  fixed  &lt;NA&gt;   -0.0405    0.0146     -2.78  -0.0690
## 10 age   ho_l… lmer… scanner  fixed  &lt;NA&gt;   -0.0386    0.0147     -2.63  -0.0674
## # … with 54 more rows, and 8 more variables: conf.high &lt;dbl&gt;, fit_sigma &lt;dbl&gt;,
## #   fit_logLik &lt;dbl&gt;, fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_REMLcrit &lt;dbl&gt;,
## #   fit_df.residual &lt;int&gt;, subsets &lt;chr&gt;</code></pre>
</div>
<div id="plot-the-specification-curve" class="section level2">
<h2>Plot the specification curve</h2>
<pre class="r"><code>specr::plot_specs(specs)</code></pre>
<p><img src="into_the_bayesian_multiverse_files/figure-html/unnamed-chunk-7-1.png" width="768" /></p>
<p>This type of plot can be overwhelming at first because it shows us a <strong>lot</strong> of information, but it is really helpful for looking at several different things!</p>
<ul>
<li><strong>Panel A</strong> shows us the regression beta estimates for our <code>x</code> predictor (plus 95% confidence intervals) for all of our specifications. Specifications are ordered from least to greatest, and colored such that red indicates a significant negative association, gray indicates a nonsignificant association, and blue (not shown on this plot) indicates a significant positive association. So, here, the majority of the specifications indicate a significant negative estimate (under <span class="math inline">\(\alpha=0.05\)</span>, such that the 95% confidence interval excludes 0), suggesting a negative relationship here between age and amygdala reactivity.</li>
<li><strong>Panel B</strong> shows us the details for each specification, keeping the coloring schema from Panel A based on estimate direction/significance. On any given line, a dash (<code>|</code>) indicates that the choice marked on the left was made, where a blank space it wasn’t made.
<ul>
<li>The top section <code>age</code> indicates that that the <code>x</code> variable (the term being examined) in all models was <code>age</code>.</li>
<li>In the <code>y</code> section below that, dashes on a given line indicate what <code>y</code> variable for amygdala reactivity was used in a given specification (note that different choices for <code>y</code> are mutually exclusive).</li>
<li>The <code>model</code> section indicates that the <code>lmer_model_with_motion</code> was the model used in all specifications here.</li>
<li>The <code>controls</code> section shows which covariates were used in each specification, although we should remember here that ALL models had a covariate for head motion built into them (so <code>no covariates</code> really means no covariates <em>other than head motion</em>)</li>
<li>The bottom section <code>subsets</code> indicaates which subset of the data the model was run on, either <code>all</code>, or just the <code>not_studied</code> group.</li>
</ul></li>
<li>So, what is <strong>Panel B</strong> telling us practically? We can see how estimates term of interest differ as a function of different model specification decision points! In general, if specifications tend to show up towards the left side of the graph, this means that the specifications resulted in <em>more negative</em> beta estimates (more negative age-related change in amygdala reactivity here), while specifications that tend to show up towards the right side of the graph tended to result in <em>more positive</em> beta estimates. Most specifically, we can see that here in the simulated data:
<ul>
<li>Specifications with <code>ho_right_amyg_tstat</code> or `<code>ho_right_amyg_beta</code> as the <code>y</code> variable tended to result in the most strongly negative estimates compared to the others (they show up towards the left side)</li>
<li>Specifications with <code>native_left_amyg_tstat</code> as the <code>y</code> variable tended to result in the most strongly positive estimates compared to the others (they show up towards the right side)</li>
</ul></li>
</ul>
</div>
<div id="view-the-multiverse-decision-tree" class="section level2">
<h2>View the multiverse decision tree</h2>
<p>specr also gives us a nice <code>plot_decisiontree()</code> function for summarizing what our specifications are</p>
<pre class="r"><code>specr::plot_decisiontree(specs, legend = TRUE)</code></pre>
<p><img src="into_the_bayesian_multiverse_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
